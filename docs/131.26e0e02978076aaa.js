"use strict";(self.webpackChunkScheduler=self.webpackChunkScheduler||[]).push([[131],{9131:(nt,T,n)=>{n.r(T),n.d(T,{AddEditModule:()=>ot});var c=n(6575),l=n(8200),N=n(8691),v=n(1863),p=n(2682),m=n(476),q=n(3187),U=n(4970),r=n(8849),I=n(2418),g=n(1552),_=n(3049),u=n(9794),h=n(7627),x=n(5630),A=n(8540),Z=n(1501),t=n(9039),b=n(5397);function E(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Create Account"),t.qZA())}function J(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Edit Account"),t.qZA())}function Q(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Title is required"),t.qZA())}function M(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,Q,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.title.errors.required)}}function Y(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"First Name is required"),t.qZA())}function w(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,Y,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.firstName.errors.required)}}function P(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Last Name is required"),t.qZA())}function y(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,P,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.lastName.errors.required)}}function S(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Email is required"),t.qZA())}function F(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Email must be a valid email address"),t.qZA())}function O(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,S,2,0,"div",0)(2,F,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.email.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.email.errors.email)}}function V(e,s){1&e&&(t.ynx(0,41),t.TgZ(1,"div",42),t._uU(2," Wrong phone number "),t.qZA(),t.BQk())}function k(e,s){if(1&e&&(t.TgZ(0,"option"),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.hij(" ",i," ")}}function B(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Role is required"),t.qZA())}function L(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,B,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.role.errors.required)}}function R(e,s){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid DOB"),t.qZA())}function K(e,s){1&e&&(t.TgZ(0,"div")(1,"h3",43),t._uU(2,"Change Password"),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Leave blank to keep the same password"),t.qZA()())}function D(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Password is required"),t.qZA())}function G(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Password must be at least 6 characters"),t.qZA())}function j(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,D,2,0,"div",0)(2,G,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.password.errors.minlength)}}function z(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Confirm Password is required"),t.qZA())}function W(e,s){1&e&&(t.TgZ(0,"div"),t._uU(1,"Passwords must match"),t.qZA())}function X(e,s){if(1&e&&(t.TgZ(0,"div",40),t.YNc(1,z,2,0,"div",0)(2,W,2,0,"div",0),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.f.confirmPassword.errors.required),t.xp6(1),t.Q6J("ngIf",i.f.confirmPassword.errors.mustMatch)}}function H(e,s){1&e&&t._UZ(0,"span",44)}const a=e=>({"is-invalid":e}),$=()=>["/admin/accounts"];let C=(()=>{class e{constructor(i,d,o,f,rt){this.formBuilder=i,this.route=d,this.router=o,this.accountService=f,this.alertService=rt,this.DATE_FORMAT=l.g.dateFormat,this.loading=!1,this.submitted=!1,this.roles=[],this.userFunctions=[],this.isLoaded=!1,this.countryCodes=[],this.roles=Object.values(Z.uU).filter(st=>"string"==typeof st)}ngAfterViewInit(){}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({title:["",r.kI.required],firstName:["",r.kI.required],lastName:["",r.kI.required],email:["",[r.kI.required,r.kI.email]],role:[this.roles[0],r.kI.required],dob:["",[r.kI.required]],password:["",[r.kI.minLength(6),this.isAddMode?r.kI.required:r.kI.nullValidator]],scheduleGroup:["",[r.kI.nullValidator]],confirmPassword:[""],phoneNumber:["",[]]},{validator:[(0,x.Yf)("password","confirmPassword")]}),this.isAddMode||this.accountService.getById(this.id).pipe((0,h.P)()).subscribe({next:i=>{this.account=i,this.form.patchValue(i),this.form.get("dob").setValue(A(this.account.dob).format(l.g.dateFormat))},error:i=>{console.error(i)}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.isAddMode?this.createAccount():this.updateAccount())}createAccount(){var i=new Z.mR;i.title=this.f.title.value,i.firstName=this.f.firstName.value,i.lastName=this.f.lastName.value,i.email=this.f.email.value,i.role=this.f.role.value,i.dob=A(this.f.dob.value).format(l.g.dateFormat),i.password=this.f.password.value,i.confirmPassword=this.f.confirmPassword.value,i.phoneNumber=this.f.phoneNumber.value,this.accountService.create(i).pipe((0,h.P)()).subscribe({next:()=>{this.alertService.success("Account created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:d=>{this.alertService.error(d),this.loading=!1}})}updateAccount(){var i=new Z.mR;i.title=this.f.title.value,i.firstName=this.f.firstName.value,i.lastName=this.f.lastName.value,i.email=this.f.email.value,i.role=this.f.role.value,i.dob=A(this.f.dob.value).format(l.g.dateFormat),i.password=this.f.password.value,i.confirmPassword=this.f.confirmPassword.value,i.phoneNumber=this.f.phoneNumber.value,this.accountService.update(this.id,i).pipe((0,h.P)()).subscribe({next:d=>{this.alertService.success("Update successful",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route}),this.loading=!1},error:d=>{this.alertService.error(d),this.loading=!1}})}static#t=this.\u0275fac=function(d){return new(d||e)(t.Y36(r.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(b.B),t.Y36(b.c))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:90,vars:46,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3","row"],[1,"col-4"],["formControlName","title",1,"form-select",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"row"],[1,"mb-3","col-12"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],[1,"mb-2","row","col-10"],[1,"col"],[1,"mb-3","col-10"],["type","text","formControlName","phoneNumber","autocomplete","off","autofocus","true","placeholder","Phone number",1,"form-control",3,"maxlength","minlength","ngClass"],["class","",4,"ngIf"],[1,"col-2"],["for","scheduleGroup"],["type","text","formControlName","scheduleGroup","ng-value","account.scheduleGroup","placeholder","","readonly","",1,"form-control"],[1,"mb-3","col-3"],["formControlName","role",1,"form-select",3,"ngClass"],[4,"ngFor","ngForOf"],["appearance","outlined",1,"mb-3"],[1,"col-12"],["appearance","outline"],["formControlName","dob","matInput","","placeholder","Choose a date","required","",3,"matDatepicker"],["ref",""],["matIconSuffix","",3,"for"],["picker",""],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"col-1"],[1,"btn","btn-primary"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"],[1,"invalid-feedback"],[1,""],[1,"input-warning","text-danger","mt-1","error","robot_register_invalidPhoneNumberError"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(d,o){if(1&d&&(t.YNc(0,E,2,0,"h1",0)(1,J,2,0,"h1",0),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(3,"div",2)(4,"div",3)(5,"label"),t._uU(6,"Title*"),t.qZA(),t.TgZ(7,"select",4),t._UZ(8,"option",5),t.TgZ(9,"option",6),t._uU(10,"Mr"),t.qZA(),t.TgZ(11,"option",7),t._uU(12,"Mrs"),t.qZA(),t.TgZ(13,"option",8),t._uU(14,"Miss"),t.qZA(),t.TgZ(15,"option",9),t._uU(16,"Ms"),t.qZA()(),t.YNc(17,M,2,1,"div",10),t.qZA(),t.TgZ(18,"div",3)(19,"label"),t._uU(20,"First Name*"),t.qZA(),t._UZ(21,"input",11),t.YNc(22,w,2,1,"div",10),t.qZA(),t.TgZ(23,"div",3)(24,"label"),t._uU(25,"Last Name*"),t.qZA(),t._UZ(26,"input",12),t.YNc(27,y,2,1,"div",10),t.qZA()(),t.TgZ(28,"div",13)(29,"div",14)(30,"label"),t._uU(31,"Email*"),t.qZA(),t._UZ(32,"input",15),t.YNc(33,O,3,2,"div",10),t.qZA()(),t.TgZ(34,"div",16)(35,"div",17)(36,"label"),t._uU(37,"Phone"),t.qZA(),t.TgZ(38,"table",18)(39,"tr")(40,"td")(41,"div"),t._UZ(42,"input",19),t.qZA()()()(),t.YNc(43,V,3,0,"ng-container",20),t.qZA(),t.TgZ(44,"div",21)(45,"label",22),t._uU(46,"Team Group"),t.qZA(),t._UZ(47,"input",23),t.qZA()(),t.TgZ(48,"div",13)(49,"div",24)(50,"label"),t._uU(51,"Role*"),t.qZA(),t.TgZ(52,"select",25),t.YNc(53,k,2,1,"option",26),t.qZA(),t.YNc(54,L,2,1,"div",10),t.qZA()(),t.TgZ(55,"mat-card",27)(56,"mat-card-content")(57,"div",13)(58,"div",28)(59,"mat-form-field",29)(60,"mat-label"),t._uU(61,"DOB+"),t.qZA(),t._UZ(62,"input",30,31),t.TgZ(64,"mat-hint"),t._uU(65),t.qZA(),t._UZ(66,"mat-datepicker-toggle",32)(67,"mat-datepicker",null,33),t.YNc(69,R,2,0,"mat-error",0),t.qZA()()()()(),t.YNc(70,K,5,0,"div",0),t.TgZ(71,"div",2)(72,"div",17)(73,"label"),t._uU(74,"Password"),t.qZA(),t._UZ(75,"input",34),t.YNc(76,j,3,2,"div",10),t.qZA(),t.TgZ(77,"div",17)(78,"label"),t._uU(79,"Confirm Password"),t.qZA(),t._UZ(80,"input",35),t.YNc(81,X,3,2,"div",10),t.qZA()(),t.TgZ(82,"div",13)(83,"div",36)(84,"button",37),t.YNc(85,H,1,0,"span",38),t._uU(86," Update "),t.qZA()(),t.TgZ(87,"div",36)(88,"a",39),t._uU(89,"Back"),t.qZA()()()()),2&d){const f=t.MAs(68);t.Q6J("ngIf",o.isAddMode),t.xp6(1),t.Q6J("ngIf",!o.isAddMode),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngClass",t.VKq(29,a,o.submitted&&o.f.title.errors)),t.xp6(10),t.Q6J("ngIf",o.submitted&&o.f.title.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(31,a,o.submitted&&o.f.firstName.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.firstName.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(33,a,o.submitted&&o.f.lastName.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.lastName.errors),t.xp6(5),t.Q6J("ngClass",t.VKq(35,a,o.submitted&&o.f.email.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.email.errors),t.xp6(9),t.Q6J("maxlength",10)("minlength",10)("ngClass",t.VKq(37,a,o.form.controls.phoneNumber.hasError("phoneNumberInvalid"))),t.xp6(1),t.Q6J("ngIf",o.form.controls.phoneNumber.hasError("phoneNumberInvalid")),t.xp6(9),t.Q6J("ngClass",t.VKq(39,a,o.submitted&&o.f.role.errors)),t.xp6(1),t.Q6J("ngForOf",o.roles),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.role.errors),t.xp6(8),t.Q6J("matDatepicker",f),t.xp6(3),t.Oqu(o.DATE_FORMAT),t.xp6(1),t.Q6J("for",f),t.xp6(3),t.Q6J("ngIf",o.submitted&&o.f.dob.errors),t.xp6(1),t.Q6J("ngIf",!o.isAddMode),t.xp6(5),t.Q6J("ngClass",t.VKq(41,a,o.submitted&&o.f.password.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.password.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(43,a,o.submitted&&o.f.confirmPassword.errors)),t.xp6(1),t.Q6J("ngIf",o.submitted&&o.f.confirmPassword.errors),t.xp6(4),t.Q6J("ngIf",o.loading),t.xp6(3),t.Q6J("routerLink",t.DdM(45,$))}},dependencies:[c.mk,c.sg,c.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.wO,r.nD,r.sg,r.u,g.a8,g.dn,_.Nt,m.KE,m.hX,m.bx,m.TO,m.R9,p.Mq,p.hl,p.nW,u.rH],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2){width:80%}"]})}return e})();const tt=[{path:"add",component:C},{path:"edit/:id",component:C}];let et=(()=>{class e{static#t=this.\u0275fac=function(d){return new(d||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(tt),u.Bz]})}return e})();const it={parse:{dateInput:l.g.dateFormat},display:{dateInput:l.g.dateFormat,monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let ot=(()=>{class e{static#t=this.\u0275fac=function(d){return new(d||e)};static#e=this.\u0275mod=t.oAB({type:e});static#i=this.\u0275inj=t.cJS({providers:[{provide:v._A,useClass:I.t7,deps:[v.Ad]},{provide:v.sG,useValue:it}],imports:[c.ez,r.u5,r.UX,U.q,g.QW,_.c,q.p0,p.FA,m.lN,N.EC,u.Bz,et]})}return e})()}}]);
//# sourceMappingURL=131.26e0e02978076aaa.js.map