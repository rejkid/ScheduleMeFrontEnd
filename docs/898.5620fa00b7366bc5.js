"use strict";(self.webpackChunkScheduler=self.webpackChunkScheduler||[]).push([[898],{8898:(C,d,s)=>{s.r(d),s.d(d,{AutoGeneratorModule:()=>S});var p=s(6575),u=s(8849),a=s(9794),m=s(786),e=s(9039),f=s(5397);const h=["progressFile"];function g(i,G){if(1&i&&(e.TgZ(0,"div",13)(1,"label",14),e._uU(2,"File progress:"),e.qZA(),e._UZ(3,"progress",15,16),e.qZA()),2&i){const o=e.oxw();e.xp6(3),e.Q6J("value",o.uploadProgress)}}const v=()=>["../../"],b=[{path:"generate",component:(()=>{class i{constructor(o,t,n,r){this.fileHasBeenSelected=!1,this.uploadProgress=0,this.accountService=o,this.alertService=t,this.router=n,this.route=r}ngOnInit(){this.fileName=""}ngAfterViewInit(){this.progressChildren.changes.subscribe(o=>{null!=o.first&&o.first.nativeElement.removeAttribute("value")})}onFileSelected(o){const t=o.target.files[0];t?(this.fileHasBeenSelected=!0,this.fileName=t.name):this.fileHasBeenSelected=!1}onSubmit(o,t){const n=t.files[0];if(n){this.submitted=!0,this.fileName=n.name;const r=new FormData;if(r.append("file",n),"application/x-msdownload"==n.type)return void this.alertService.error("File must be an .xlsx file type");const c=this.accountService.uploadTimeSlotsFile(r).pipe((0,m.x)(()=>{this.reset()}));this.uploadSub=c.subscribe({next:l=>{},complete:()=>{this.alertService.info("Done"),this.submitted=!1,this.uploadProgress=-1,this.router.navigate(["../../"],{relativeTo:this.route})},error:l=>{this.alertService.error(l),this.submitted=!1}})}}cancelUpload(){this.uploadSub.unsubscribe(),this.reset()}reset(){this.uploadProgress=null,this.uploadSub=null}static#e=this.\u0275fac=function(t){return new(t||i)(e.Y36(f.B),e.Y36(f.c),e.Y36(a.F0),e.Y36(a.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-auto-generator"]],viewQuery:function(t,n){if(1&t&&e.Gf(h,5),2&t){let r;e.iGM(r=e.CRH())&&(n.progressChildren=r)}},decls:23,vars:5,consts:[[1,"container"],[1,"row"],[1,"mb-3","col-6"],[1,"file-upload"],["type","button","color","primary",1,"btn","btn-primary","upload-button",3,"click"],["src","./assets/images/Upload.png"],["method","post","enctype","multipart/form-data"],["type","file","accept",".xlsx","required","",1,"file-input",3,"change"],["fileUpload",""],[1,"col-1"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"routerLink"],["col-12","",4,"ngIf"],["col-12",""],["for","file"],["id","progress-bar","max","100",3,"value"],["progressFile",""]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e._uU(2,"Upload Timeslots & Generate Schedules"),e.qZA(),e.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"div",3),e._uU(7),e.TgZ(8,"button",4),e.NdJ("click",function(){e.CHM(r);const l=e.MAs(13);return e.KtG(l.click())}),e._UZ(9,"img",5),e.qZA()(),e.TgZ(10,"form",6)(11,"div")(12,"input",7,8),e.NdJ("change",function(l){return n.onFileSelected(l)}),e.qZA()()()(),e.TgZ(14,"div")(15,"div",1)(16,"div",9)(17,"button",10),e.NdJ("click",function(l){e.CHM(r);const y=e.MAs(13);return e.KtG(n.onSubmit(l,y))}),e._uU(18,"Submit"),e.qZA()(),e.TgZ(19,"div",9)(20,"a",11),e._uU(21,"Back"),e.qZA()()()(),e.YNc(22,g,5,1,"div",12),e.qZA()()()}2&t&&(e.xp6(7),e.hij(" ",n.fileName||"No file uploaded yet."," "),e.xp6(10),e.Q6J("disabled",!n.fileHasBeenSelected||n.submitted),e.xp6(3),e.Q6J("routerLink",e.DdM(4,v)),e.xp6(2),e.Q6J("ngIf",n.submitted))},dependencies:[p.O5,u._Y,u.JL,u.F,a.rH],styles:[".file-input[_ngcontent-%COMP%]{display:none}.upload-button[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;border:none}img[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}progress[_ngcontent-%COMP%]{text-align:center;width:100%}"]})}return i})()}];let A=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[a.Bz.forChild(b),a.Bz]})}return i})(),S=(()=>{class i{static#e=this.\u0275fac=function(t){return new(t||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[p.ez,u.u5,u.UX,a.Bz,A]})}return i})()}}]);
//# sourceMappingURL=898.5620fa00b7366bc5.js.map