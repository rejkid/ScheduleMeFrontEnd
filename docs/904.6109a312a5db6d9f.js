"use strict";(self.webpackChunkScheduler=self.webpackChunkScheduler||[]).push([[904],{6904:(U,I,c)=>{c.r(I),c.d(I,{AccountModule:()=>Ee});var _=c(6575),a=c(8849),f=c(9794),e=c(9039),p=c(5397);let A=(()=>{class t{constructor(r,s){this.router=r,this.accountService=s,this.accountService.accountValue&&this.router.navigate(["/"])}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(f.F0),e.Y36(p.B))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-sm-8","offset-sm-2","mt-5"],[1,"card","m-3"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"router-outlet"),e.qZA()()()())},dependencies:[f.lC],encapsulation:2})}return t})();var T=c(7627),b=c(8540),h=c(8200);let w=(()=>{class t{constructor(){}static dateValidator(r){return r&&r.value&&!b(r.value,h.g.dateFormat,!0).isValid()?{dateVaidator:!0}:null}static dateTimeValidator(r){return r&&r.value&&!b(r.value,h.g.dateTimeFormat,!0).isValid()?{dateVaidator:!0}:null}static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var v=c(2682),D=c(3049),u=c(476);function Z(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function o(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is invalid"),e.qZA())}function l(t,m){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,Z,2,0,"div",13)(2,o,2,0,"div",13),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.email.errors.email)}}function n(t,m){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid DOB"),e.qZA())}function d(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function M(t,m){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,d,2,0,"div",13),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.password.errors.required)}}function y(t,m){1&t&&e._UZ(0,"span",23)}const O=t=>({"is-invalid":t});let E=(()=>{class t{constructor(r,s,i,g,N){this.formBuilder=r,this.route=s,this.router=i,this.accountService=g,this.alertService=N,this.DATE_FORMAT=h.g.dateFormat,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[a.kI.required,a.kI.email]],password:["",a.kI.required],dob:["",[a.kI.required,w.dateValidator]]}),this.form.get("dob").setValue(b(new Date).format(h.g.dateFormat))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value,b(this.f.dob.value).format(h.g.dateFormat)).pipe((0,T.P)()).subscribe({next:()=>{this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/")},error:r=>{this.alertService.error(r),this.loading=!1}}))}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(a.qu),e.Y36(f.gz),e.Y36(f.F0),e.Y36(p.B),e.Y36(p.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:40,vars:15,consts:[[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"mb-3"],["id","emailLabel"],["id","emailInput","type","text","formControlName","email","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["appearance","outline"],["formControlName","dob","matInput","","placeholder","Choose a date","required","",3,"matDatepicker"],["ref",""],["matIconSuffix","",3,"for"],["picker",""],[4,"ngIf"],["id","passwordLabel"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"col-3"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"col-5"],["routerLink","../forgot-password",1,"btn","btn-link","pr-0"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,i){if(1&s&&(e.TgZ(0,"h3",0),e._uU(1,"Login"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,l,3,2,"div",7),e.qZA()(),e.TgZ(10,"div",3)(11,"div",4)(12,"mat-form-field",8)(13,"mat-label"),e._uU(14,"DOB"),e.qZA(),e._UZ(15,"input",9,10),e.TgZ(17,"mat-hint"),e._uU(18),e.qZA(),e._UZ(19,"mat-datepicker-toggle",11)(20,"mat-datepicker",null,12),e.YNc(22,n,2,0,"mat-error",13),e.qZA()()(),e.TgZ(23,"div",3)(24,"div",4)(25,"label",14),e._uU(26,"Password"),e.qZA(),e._UZ(27,"input",15),e.YNc(28,M,2,1,"div",7),e.qZA()(),e.TgZ(29,"div",3)(30,"div",16)(31,"button",17),e.YNc(32,y,1,0,"span",18),e._uU(33," Login "),e.qZA()(),e.TgZ(34,"div",16)(35,"a",19),e._uU(36,"Register"),e.qZA()(),e.TgZ(37,"div",20)(38,"a",21),e._uU(39,"Forgot Password?"),e.qZA()()()()()),2&s){const g=e.MAs(21);e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngClass",e.VKq(11,O,i.submitted&&i.f.email.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.email.errors),e.xp6(6),e.Q6J("matDatepicker",g),e.xp6(3),e.Oqu(i.DATE_FORMAT),e.xp6(1),e.Q6J("for",g),e.xp6(3),e.Q6J("ngIf",i.submitted&&i.f.dob.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(13,O,i.submitted&&i.f.password.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.password.errors),e.xp6(3),e.Q6J("disabled",i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},dependencies:[_.mk,_.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,f.rH,v.Mq,v.hl,v.nW,D.Nt,u.KE,u.hX,u.bx,u.TO,u.R9],styles:['#emailLabel[_ngcontent-%COMP%]:after{content:"*";font-size:16px;font-family:Roboto,sans-serif;font-weight:400}#emailInput[_ngcontent-%COMP%]{font-size:16px;font-family:Roboto,sans-serif;font-weight:400}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{font-size:18px;display:inline-block;color:#000}[_nghost-%COMP%]     .mdc-text-field:not(.mdc-text-field--disabled) .mdc-floating-label .mat-mdc-form-field-required-marker{font-size:22px;font-family:Roboto,sans-serif;font-weight:400}#passwordLabel[_ngcontent-%COMP%]:after{content:"*";font-size:16px;font-family:Roboto,sans-serif;font-weight:400}']})}return t})();var Y=c(5630),S=c(1501);function J(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Title is required"),e.qZA())}function R(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,J,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.title.errors.required)}}function F(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name is required"),e.qZA())}function L(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,F,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.firstName.errors.required)}}function Q(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name is required"),e.qZA())}function V(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,Q,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.lastName.errors.required)}}function B(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function W(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email must be a valid email address"),e.qZA())}function K(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,B,2,0,"div",24)(2,W,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.email.errors.email)}}function z(t,m){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid DOB"),e.qZA())}function G(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function X(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function j(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,G,2,0,"div",24)(2,X,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.password.errors.minlength)}}function H(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Confirm Password is required"),e.qZA())}function $(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Passwords must match"),e.qZA())}function ee(t,m){if(1&t&&(e.TgZ(0,"div",33),e.YNc(1,H,2,0,"div",24)(2,$,2,0,"div",24),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.confirmPassword.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.confirmPassword.errors.mustMatch)}}function te(t,m){1&t&&(e.TgZ(0,"div",33),e._uU(1,"Accept Ts & Cs is required"),e.qZA())}function re(t,m){1&t&&e._UZ(0,"span",34)}const C=t=>({"is-invalid":t});let oe=(()=>{class t{constructor(r,s,i,g,N){this.formBuilder=r,this.route=s,this.router=i,this.accountService=g,this.alertService=N,this.DATE_FORMAT=h.g.dateFormat,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({title:["",a.kI.required],firstName:["",a.kI.required],lastName:["",a.kI.required],email:["",[a.kI.required,a.kI.email]],dob:["",[a.kI.required]],password:["",[a.kI.required,a.kI.minLength(6)]],confirmPassword:["",a.kI.required],acceptTerms:[!1,a.kI.requiredTrue]},{validator:(0,Y.Yf)("password","confirmPassword")}),this.form.get("dob").setValue(new Date)}get f(){return this.form.controls}onSubmit(){if(this.submitted=!0,this.alertService.clear(),!this.form.invalid){this.loading=!0;var r=new S.mR;r.title=this.f.title.value,r.firstName=this.f.firstName.value,r.lastName=this.f.lastName.value,r.email=this.f.email.value,r.dob=b(this.f.dob.value).format(h.g.dateFormat),r.password=this.f.password.value,r.confirmPassword=this.f.confirmPassword.value,r.acceptTerms=this.f.acceptTerms.value,this.accountService.register(r).pipe((0,T.P)()).subscribe({next:()=>{this.alertService.success("Registration successful, please check your email for verification instructions",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:s=>{this.alertService.error(s),this.loading=!1}})}}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(a.qu),e.Y36(f.gz),e.Y36(f.F0),e.Y36(p.B),e.Y36(p.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:69,vars:35,consts:[[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"mb-3","col"],["formControlName","title",1,"form-control","form-select",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"mb-3","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"mb-3"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],[1,"mb-3","row"],[1,"col-4"],["appearance","outline"],["formControlName","dob","matInput","","placeholder","Choose a date","required","",3,"matDatepicker"],["ref",""],["matIconSuffix","",3,"for"],["picker",""],[4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"mb-3","form-check"],["type","checkbox","formControlName","acceptTerms","id","acceptTerms",1,"form-check-input",3,"ngClass"],["for","acceptTerms",1,"form-check-label"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,i){if(1&s&&(e.TgZ(0,"h3",0),e._uU(1,"Register"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",3)(5,"div",4)(6,"label"),e._uU(7,"Title*"),e.qZA(),e.TgZ(8,"select",5),e._UZ(9,"option",6),e.TgZ(10,"option",7),e._uU(11,"Mr"),e.qZA(),e.TgZ(12,"option",8),e._uU(13,"Mrs"),e.qZA(),e.TgZ(14,"option",9),e._uU(15,"Miss"),e.qZA(),e.TgZ(16,"option",10),e._uU(17,"Ms"),e.qZA()(),e.YNc(18,R,2,1,"div",11),e.qZA(),e.TgZ(19,"div",12)(20,"label"),e._uU(21,"First Name*"),e.qZA(),e._UZ(22,"input",13),e.YNc(23,L,2,1,"div",11),e.qZA(),e.TgZ(24,"div",12)(25,"label"),e._uU(26,"Last Name*"),e.qZA(),e._UZ(27,"input",14),e.YNc(28,V,2,1,"div",11),e.qZA()(),e.TgZ(29,"div",15)(30,"label"),e._uU(31,"Email*"),e.qZA(),e._UZ(32,"input",16),e.YNc(33,K,3,2,"div",11),e.qZA(),e.TgZ(34,"div",17)(35,"div",18)(36,"mat-form-field",19)(37,"mat-label"),e._uU(38,"DOB+"),e.qZA(),e._UZ(39,"input",20,21),e.TgZ(41,"mat-hint"),e._uU(42),e.qZA(),e._UZ(43,"mat-datepicker-toggle",22)(44,"mat-datepicker",null,23),e.YNc(46,z,2,0,"mat-error",24),e.qZA()()(),e.TgZ(47,"div",3)(48,"div",4)(49,"label"),e._uU(50,"Password*"),e.qZA(),e._UZ(51,"input",25),e.YNc(52,j,3,2,"div",11),e.qZA(),e.TgZ(53,"div",4)(54,"label"),e._uU(55,"Confirm Password*"),e.qZA(),e._UZ(56,"input",26),e.YNc(57,ee,3,2,"div",11),e.qZA()(),e.TgZ(58,"div",27),e._UZ(59,"input",28),e.TgZ(60,"label",29),e._uU(61,"Accept Terms & Conditions"),e.qZA(),e.YNc(62,te,2,0,"div",11),e.qZA(),e.TgZ(63,"div",15)(64,"button",30),e.YNc(65,re,1,0,"span",31),e._uU(66," Register "),e.qZA(),e.TgZ(67,"a",32),e._uU(68,"Cancel"),e.qZA()()()()),2&s){const g=e.MAs(45);e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngClass",e.VKq(21,C,i.submitted&&i.f.title.errors)),e.xp6(10),e.Q6J("ngIf",i.submitted&&i.f.title.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(23,C,i.submitted&&i.f.firstName.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.firstName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(25,C,i.submitted&&i.f.lastName.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.lastName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(27,C,i.submitted&&i.f.email.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.email.errors),e.xp6(6),e.Q6J("matDatepicker",g),e.xp6(3),e.Oqu(i.DATE_FORMAT),e.xp6(1),e.Q6J("for",g),e.xp6(3),e.Q6J("ngIf",i.submitted&&i.f.dob.errors),e.xp6(5),e.Q6J("ngClass",e.VKq(29,C,i.submitted&&i.f.password.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(31,C,i.submitted&&i.f.confirmPassword.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.confirmPassword.errors),e.xp6(2),e.Q6J("ngClass",e.VKq(33,C,i.submitted&&i.f.acceptTerms.errors)),e.xp6(3),e.Q6J("ngIf",i.submitted&&i.f.acceptTerms.errors),e.xp6(2),e.Q6J("disabled",i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},dependencies:[_.mk,_.O5,a._Y,a.YN,a.Kr,a.Fj,a.Wl,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u,f.rH,v.Mq,v.hl,v.nW,D.Nt,u.KE,u.hX,u.bx,u.TO,u.R9],encapsulation:2})}return t})();function ne(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1," Verifying... "),e.qZA())}function ie(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1," Verification failed, you can also verify your account using the "),e.TgZ(2,"a",3),e._uU(3,"forgot password"),e.qZA(),e._uU(4," page. "),e.qZA())}var x=function(t){return t[t.Verifying=0]="Verifying",t[t.Failed=1]="Failed",t}(x||{});let ae=(()=>{class t{constructor(r,s,i,g){this.route=r,this.router=s,this.accountService=i,this.alertService=g,this.EmailStatus=x,this.emailStatus=x.Verifying}ngOnInit(){const r=this.route.snapshot.queryParams.token,s=this.route.snapshot.queryParams.DOB;this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),this.accountService.verifyEmail(r,s).pipe((0,T.P)()).subscribe({next:()=>{console.log("From verify email page path is: "+this.route.url),this.alertService.success("Verification successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:()=>{this.emailStatus=x.Failed}})}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(p.B),e.Y36(p.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:5,vars:2,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],["routerLink","forgot-password"]],template:function(s,i){1&s&&(e.TgZ(0,"h3",0),e._uU(1,"Verify Email"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,ne,2,0,"div",2)(4,ie,5,0,"div",2),e.qZA()),2&s&&(e.xp6(3),e.Q6J("ngIf",i.emailStatus==i.EmailStatus.Verifying),e.xp6(1),e.Q6J("ngIf",i.emailStatus==i.EmailStatus.Failed))},dependencies:[_.O5,f.rH],encapsulation:2})}return t})();var se=c(786);function de(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function le(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is invalid"),e.qZA())}function me(t,m){if(1&t&&(e.TgZ(0,"div",17),e.YNc(1,de,2,0,"div",13)(2,le,2,0,"div",13),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.f.email.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.email.errors.email)}}function ce(t,m){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid DOB"),e.qZA())}function ue(t,m){1&t&&e._UZ(0,"span",18)}const fe=t=>({"is-invalid":t});let pe=(()=>{class t{constructor(r,s,i){this.formBuilder=r,this.accountService=s,this.alertService=i,this.DATE_FORMAT=h.g.dateFormat,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({email:["",[a.kI.required,a.kI.email]],dob:["",[a.kI.required,w.dateValidator]]}),this.form.get("dob").setValue(new Date)}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.alertService.clear(),this.accountService.forgotPassword(this.f.email.value,b(this.f.dob.value).format(h.g.dateFormat)).pipe((0,T.P)()).pipe((0,se.x)(()=>this.loading=!1)).subscribe({next:()=>this.alertService.success("Please check your email for password reset instructions"),error:r=>this.alertService.error(r)}))}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(a.qu),e.Y36(p.B),e.Y36(p.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:28,vars:11,consts:[[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mb-3","row"],[1,"col-4"],["appearance","outline"],["formControlName","dob","matInput","","placeholder","Choose a date","required","",3,"matDatepicker"],["ref",""],["matIconSuffix","",3,"for"],["picker",""],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,i){if(1&s&&(e.TgZ(0,"h3",0),e._uU(1,"Forgot Password"),e.qZA(),e.TgZ(2,"div",1)(3,"form",2),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(4,"div",3)(5,"label"),e._uU(6,"Email"),e.qZA(),e._UZ(7,"input",4),e.YNc(8,me,3,2,"div",5),e.qZA(),e.TgZ(9,"div",6)(10,"div",7)(11,"mat-form-field",8)(12,"mat-label"),e._uU(13,"DOB+"),e.qZA(),e._UZ(14,"input",9,10),e.TgZ(16,"mat-hint"),e._uU(17),e.qZA(),e._UZ(18,"mat-datepicker-toggle",11)(19,"mat-datepicker",null,12),e.YNc(21,ce,2,0,"mat-error",13),e.qZA()()(),e.TgZ(22,"div",3)(23,"button",14),e.YNc(24,ue,1,0,"span",15),e._uU(25," Submit "),e.qZA(),e.TgZ(26,"a",16),e._uU(27,"Cancel"),e.qZA()()()()),2&s){const g=e.MAs(20);e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("ngClass",e.VKq(9,fe,i.submitted&&i.f.email.errors)),e.xp6(1),e.Q6J("ngIf",i.submitted&&i.f.email.errors),e.xp6(6),e.Q6J("matDatepicker",g),e.xp6(3),e.Oqu(i.DATE_FORMAT),e.xp6(1),e.Q6J("for",g),e.xp6(3),e.Q6J("ngIf",i.submitted&&i.f.dob.errors),e.xp6(2),e.Q6J("disabled",i.loading),e.xp6(1),e.Q6J("ngIf",i.loading)}},dependencies:[_.mk,_.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,f.rH,v.Mq,v.hl,v.nW,D.Nt,u.KE,u.hX,u.bx,u.TO,u.R9],encapsulation:2})}return t})();function ge(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1," Validating token... "),e.qZA())}function _e(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1," Token validation failed, if the token has expired you can get a new one at the "),e.TgZ(2,"a",4),e._uU(3,"forgot password"),e.qZA(),e._uU(4," page. "),e.qZA())}function he(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function ve(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function Me(t,m){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,he,2,0,"div",2)(2,ve,2,0,"div",2),e.qZA()),2&t){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.password.errors.minlength)}}function Te(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Confirm Password is required"),e.qZA())}function Ae(t,m){1&t&&(e.TgZ(0,"div"),e._uU(1,"Passwords must match"),e.qZA())}function Ze(t,m){if(1&t&&(e.TgZ(0,"div",13),e.YNc(1,Te,2,0,"div",2)(2,Ae,2,0,"div",2),e.qZA()),2&t){const r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.f.confirmPassword.errors.required),e.xp6(1),e.Q6J("ngIf",r.f.confirmPassword.errors.mustMatch)}}function be(t,m){1&t&&e._UZ(0,"span",14)}const k=t=>({"is-invalid":t});function De(t,m){if(1&t){const r=e.EpF();e.TgZ(0,"form",5),e.NdJ("ngSubmit",function(){e.CHM(r);const i=e.oxw();return e.KtG(i.onSubmit())}),e.TgZ(1,"div",6)(2,"label"),e._uU(3,"Password"),e.qZA(),e._UZ(4,"input",7),e.YNc(5,Me,3,2,"div",8),e.qZA(),e.TgZ(6,"div",6)(7,"label"),e._uU(8,"Confirm Password"),e.qZA(),e._UZ(9,"input",9),e.YNc(10,Ze,3,2,"div",8),e.qZA(),e.TgZ(11,"div",6)(12,"button",10),e.YNc(13,be,1,0,"span",11),e._uU(14," Reset Password "),e.qZA(),e.TgZ(15,"a",12),e._uU(16,"Cancel"),e.qZA()()()}if(2&t){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(4),e.Q6J("ngClass",e.VKq(7,k,r.submitted&&r.f.password.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,k,r.submitted&&r.f.confirmPassword.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.confirmPassword.errors),e.xp6(2),e.Q6J("disabled",r.loading),e.xp6(1),e.Q6J("ngIf",r.loading)}}var q=function(t){return t[t.Validating=0]="Validating",t[t.Valid=1]="Valid",t[t.Invalid=2]="Invalid",t}(q||{});const ye=[{path:"",component:A,children:[{path:"login",component:E},{path:"register",component:oe},{path:"verify-email",component:ae},{path:"forgot-password",component:pe},{path:"reset-password",component:(()=>{class t{constructor(r,s,i,g,N){this.formBuilder=r,this.route=s,this.router=i,this.accountService=g,this.alertService=N,this.TokenStatus=q,this.tokenStatus=q.Validating,this.token=null,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({password:["",[a.kI.required,a.kI.minLength(6)]],confirmPassword:["",a.kI.required]},{validator:(0,Y.Yf)("password","confirmPassword")});const r=this.route.snapshot.queryParams.token,s=this.route.snapshot.queryParams.DOB;console.log("token="+r),console.log("DOB="+s),this.router.navigate([],{relativeTo:this.route,replaceUrl:!0}),this.accountService.validateResetToken(r,s).pipe((0,T.P)()).subscribe({next:()=>{this.token=r,this.tokenStatus=q.Valid},error:()=>{this.tokenStatus=q.Invalid}})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.resetPassword(this.token,this.f.password.value,this.f.confirmPassword.value).pipe((0,T.P)()).subscribe({next:()=>{this.alertService.success("Password reset successful, you can now login",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:r=>{this.alertService.error(r),this.loading=!1}}))}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(a.qu),e.Y36(f.gz),e.Y36(f.F0),e.Y36(p.B),e.Y36(p.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[1,"card-header"],[1,"card-body"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["routerLink","../forgot-password"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../login",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,i){1&s&&(e.TgZ(0,"h3",0),e._uU(1,"Reset Password"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,ge,2,0,"div",2)(4,_e,5,0,"div",2)(5,De,17,11,"form",3),e.qZA()),2&s&&(e.xp6(3),e.Q6J("ngIf",i.tokenStatus==i.TokenStatus.Validating),e.xp6(1),e.Q6J("ngIf",i.tokenStatus==i.TokenStatus.Invalid),e.xp6(1),e.Q6J("ngIf",i.tokenStatus==i.TokenStatus.Valid))},dependencies:[_.mk,_.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,f.rH],encapsulation:2})}return t})()}]}];let Ce=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(ye),f.Bz]})}return t})();var Ie=c(8691),we=c(5901),qe=c(2418),Ne=c(1065),P=c(1863),Oe=c(2965),xe=c(6988),Pe=c(9616),Ue=c(3187),Ye=c(4970);const ke={parse:{dateInput:h.g.dateFormat},display:{dateInput:h.g.dateFormat,monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let Ee=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({providers:[{provide:P._A,useClass:qe.t7,deps:[P.Ad]},{provide:P.sG,useValue:ke}],imports:[_.ez,a.UX,Ce,Ye.q,Pe.JX,Ue.p0,Oe.TU,Ne.ot,v.FA,P.XK,D.c,u.lN,Ie.EC,we._W,xe.LD]})}return t})()},5901:(U,I,c)=>{var _;c.d(I,{Am:()=>w,S9:()=>T,_W:()=>Z});var a=c(9039),f=c(1863),e=c(8540),p=c(8691);const A=e||_||(_=c.t(e,2)),T=new a.OlP("NGX_MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function b(){return{useUtc:!1}}});function h(o,l){const n=Array(o);for(let d=0;d<o;d++)n[d]=l(d);return n}let w=(()=>{class o extends p.fM{constructor(n,d){super(),this._options=d,this.setLocale(n||A.locale())}setLocale(n){super.setLocale(n);let d=A.localeData(n);this._localeData={firstDayOfWeek:d.firstDayOfWeek(),longMonths:d.months(),shortMonths:d.monthsShort(),dates:h(31,M=>this.createDate(2017,0,M+1).format("D")),longDaysOfWeek:d.weekdays(),shortDaysOfWeek:d.weekdaysShort(),narrowDaysOfWeek:d.weekdaysMin()}}getYear(n){return this.clone(n).year()}getMonth(n){return this.clone(n).month()}getDate(n){return this.clone(n).date()}getDayOfWeek(n){return this.clone(n).day()}getMonthNames(n){return"long"==n?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(n){return"long"==n?this._localeData.longDaysOfWeek:"short"==n?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(n){return this.clone(n).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(n){return this.clone(n).daysInMonth()}clone(n){return n.clone().locale(this.locale)}createDate(n,d,M){if(d<0||d>11)throw Error(`Invalid month index "${d}". Month index has to be between 0 and 11.`);if(M<1)throw Error(`Invalid date "${M}". Date has to be greater than 0.`);const y=this._createMoment({year:n,month:d,date:M}).locale(this.locale);if(!y.isValid())throw Error(`Invalid date "${M}" for month with index "${d}".`);return y}today(){return this._createMoment().locale(this.locale)}parse(n,d){return n&&"string"==typeof n?this._createMoment(n,d,this.locale):n?this._createMoment(n).locale(this.locale):null}format(n,d){if(n=this.clone(n),!this.isValid(n))throw Error("MomentDateAdapter: Cannot format invalid date.");return n.format(d)}addCalendarYears(n,d){return this.clone(n).add({years:d})}addCalendarMonths(n,d){return this.clone(n).add({months:d})}addCalendarDays(n,d){return this.clone(n).add({days:d})}toIso8601(n){return this.clone(n).format()}deserialize(n){let d;if(n instanceof Date)d=this._createMoment(n).locale(this.locale);else if(this.isDateInstance(n))return this.clone(n);if("string"==typeof n){if(!n)return null;d=this._createMoment(n,A.ISO_8601).locale(this.locale)}return d&&this.isValid(d)?this._createMoment(d).locale(this.locale):super.deserialize(n)}isDateInstance(n){return A.isMoment(n)}isValid(n){return this.clone(n).isValid()}invalid(){return A.invalid()}getHour(n){return n.hours()}getMinute(n){return n.minutes()}getSecond(n){return n.seconds()}setHour(n,d){n.hours(d)}setMinute(n,d){n.minutes(d)}setSecond(n,d){n.seconds(d)}_createMoment(n,d,M){const{strict:y,useUtc:O}=this._options||{};return O?A.utc(n,d,M,y):A(n,d,M,y)}}return o.\u0275fac=function(n){return new(n||o)(a.LFG(f.Ad,8),a.LFG(T,8))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac}),o})();const v="l, LTS",D={parse:{dateInput:v},display:{dateInput:v,monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let u=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({providers:[{provide:p.fM,useClass:w,deps:[f.Ad,T]}]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({providers:[{provide:p.ab,useValue:D}],imports:[u]}),o})()},2418:(U,I,c)=>{var _;c.d(I,{t7:()=>h});var a=c(9039),f=c(1863),e=c(8540);const p=e||_||(_=c.t(e,2)),A=new a.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function T(){return{useUtc:!1}}});function b(u,Z){const o=Array(u);for(let l=0;l<u;l++)o[l]=Z(l);return o}let h=(()=>{class u extends f._A{constructor(o,l){super(),this._options=l,this.setLocale(o||p.locale())}setLocale(o){super.setLocale(o);let l=p.localeData(o);this._localeData={firstDayOfWeek:l.firstDayOfWeek(),longMonths:l.months(),shortMonths:l.monthsShort(),dates:b(31,n=>this.createDate(2017,0,n+1).format("D")),longDaysOfWeek:l.weekdays(),shortDaysOfWeek:l.weekdaysShort(),narrowDaysOfWeek:l.weekdaysMin()}}getYear(o){return this.clone(o).year()}getMonth(o){return this.clone(o).month()}getDate(o){return this.clone(o).date()}getDayOfWeek(o){return this.clone(o).day()}getMonthNames(o){return"long"==o?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(o){return"long"==o?this._localeData.longDaysOfWeek:"short"==o?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(o){return this.clone(o).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(o){return this.clone(o).daysInMonth()}clone(o){return o.clone().locale(this.locale)}createDate(o,l,n){const d=this._createMoment({year:o,month:l,date:n}).locale(this.locale);return d.isValid(),d}today(){return this._createMoment().locale(this.locale)}parse(o,l){return o&&"string"==typeof o?this._createMoment(o,l,this.locale):o?this._createMoment(o).locale(this.locale):null}format(o,l){return o=this.clone(o),this.isValid(o),o.format(l)}addCalendarYears(o,l){return this.clone(o).add({years:l})}addCalendarMonths(o,l){return this.clone(o).add({months:l})}addCalendarDays(o,l){return this.clone(o).add({days:l})}toIso8601(o){return this.clone(o).format()}deserialize(o){let l;if(o instanceof Date)l=this._createMoment(o).locale(this.locale);else if(this.isDateInstance(o))return this.clone(o);if("string"==typeof o){if(!o)return null;l=this._createMoment(o,p.ISO_8601).locale(this.locale)}return l&&this.isValid(l)?this._createMoment(l).locale(this.locale):super.deserialize(o)}isDateInstance(o){return p.isMoment(o)}isValid(o){return this.clone(o).isValid()}invalid(){return p.invalid()}_createMoment(o,l,n){const{strict:d,useUtc:M}=this._options||{};return M?p.utc(o,l,n,d):p(o,l,n,d)}}return u.\u0275fac=function(o){return new(o||u)(a.LFG(f.Ad,8),a.LFG(A,8))},u.\u0275prov=a.Yz7({token:u,factory:u.\u0275fac}),u})()}}]);
//# sourceMappingURL=904.6109a312a5db6d9f.js.map